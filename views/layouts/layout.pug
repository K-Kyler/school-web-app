doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        meta(name="google-signin-client_id" content="1041474457742-c79qab5j7ctbig74p1qps8eejocqm2ve.apps.googleusercontent.com")
        title TDTU Social Network
        link(rel="stylesheet", href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css", integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm", crossorigin="anonymous")
        link(rel="stylesheet", href="/stylesheets/style.css")
        link(rel='icon' sizes='16x16' href='/images/logo.svg')
    body 
        //- Content
        block content

        //- Sign out modal
        #logoutModal.modal.fade(role='dialog')
            .modal-dialog.modal-lg(role='content')
                .modal-content
                    .modal-header
                        h4.modal-title Do you want to sign out?
                        button.close(type='close', data-dismiss='modal') &times;
                    .modal-body.d-flex.justify-content-end
                        button(class="btn btn-danger", id="modalLogoutButton", onclick="onGoogleSignOut()") Sign out
                        button(class="btn btn-default ml-3", data-dismiss="modal") Close

        //- Post modal
        #postModal.modal.fade(role='dialog')
            .modal-dialog.modal-lg(role='content')
                .modal-content
                    .modal-header
                        h4.modal-title Create post
                        button.close(type='close', data-dismiss='modal') &times;
                    .modal-body
                        form 
                            if user 
                                .form-group.row.d-flex.align-items-center
                                    .col-md-1

                                            if user.avatar === ""
                                                img(id="profileAvatar", width="40", height="40", src="/images/default_avatar.svg", alt="user avatar")
                                            else
                                                img(id="profileAvatar", width="40", height="40", src=user.avatar, alt="user avatar")

                                    .col-md-11 
                                        span(id="owner") #{user.name}

                                .form-group.row 
                                    .col-md-12 
                                        textarea(placeholder='What are you thinking?', class="form-control", required, id="content", name="content", rows="5")
                                .form-group.row 
                                    .col-md-12
                                        input(type="file", name="image", id="image", class="form-control")
                                .form-group.row 
                                    .col-md-12
                                        input(class="form-control", type="text", name="video", id="video", placeholder="Youtube URL only")
                                .form-group.row
                                    .col-md-12.justify-content-end.d-flex
                                        button(class="btn btn-danger", id="modalPostButton") Post
                                        button(class="btn btn-default ml-3", data-dismiss="modal") Close

        //- Info modal
        #infoModal.modal.fade(role='dialog')
            .modal-dialog.modal-lg(role='content')
                .modal-content
                    .modal-header
                        h4.modal-title Self Information
                        button.close(type='close', data-dismiss='modal') &times;
                    .modal-body
                        form(id="infoForm")
                            if user
                                if (user.avatar === "")
                                    div(class="mb-2 d-flex justify-content-center")
                                        label(class="d-flex flex-column justify-content-end align-items-end", for="newAvatar") 
                                            img(id="avatarInfo", width="80", height="80", src="/images/default_avatar.svg", alt="user avatar")
                                            span
                                                i(class="fas fa-pen")
                                        input(onchange="displayAvatarHandler(this);", accept="image/*", class="d-none", type="file", name="newAvatar", id="newAvatar")
                                else 
                                    div(class="mb-2 d-flex justify-content-center")
                                        label(class="d-flex flex-column justify-content-end align-items-end", for="newAvatar") 
                                            img(id="avatarInfo", width="80", height="80", src=user.avatar, alt="user avatar")
                                            span
                                                i(class="fas fa-pen")
                                        input(onchange="displayAvatarHandler(this);", accept="image/*", class="d-none", type="file", name="newAvatar", id="newAvatar")

                                if (user.type === "Admin" || user.type === "Staff")
                                    .form-group.row
                                        label.col-md-12.col-form-label(for='userEmail') Email
                                        .col-md-12 
                                            input(required, disabled, class="form-control", type="text", name="userEmail", id="userEmail", value=user.email)
                                    .form-group.row
                                        label.col-md-12.col-form-label(for="userName") Name
                                            span 
                                                i(class="fas fa-pen")
                                        .col-md-12
                                            input(required, disabled,  class="form-control", type="text", name="userName", id="userName", value=user.name)
                                    .form-group.row
                                        label.col-md-12.col-form-label(for='userPhone') Phone
                                            span 
                                                i(class="fas fa-pen")
                                        .col-md-12
                                            input(required, disabled,  class="form-control", type="tel", name="userPhone", id="userPhone", value=user.phone)
                                    .form-group.row
                                        label.col-md-12.col-form-label(for='newPassword') Change password
                                            span 
                                                i(class="fas fa-pen")
                                        .col-md-12
                                            input(required, disabled,  placeholder="Enter new password", class="form-control", type="password", name="newPassword", id="newPassword")
                                else if (user.type === "Student")
                                    .form-group.row
                                        label.col-md-12.col-form-label(for="userEmail") Email
                                        .col-md-12 
                                            input(required, disabled, class="form-control", type="text", name="userEmail", id="userEmail", value=user.email)
                                    .form-group.row
                                        label.col-md-12.col-form-label(for="userName") Name
                                            span 
                                                i(class="fas fa-pen")
                                        .col-md-12
                                            input(required, disabled,  class="form-control", type="text", name="userName", id="userName", value=user.name)
                                    .form-group.row
                                        label.col-md-12.col-form-label(for='userPhone') Phone
                                            span 
                                                i(class="fas fa-pen")
                                        .col-md-12
                                            input(required, disabled,  class="form-control", type="tel", name="userPhone", id="userPhone", value=user.phone)
                                    .form-group.row
                                        label.col-md-12.col-form-label(for='class') Class
                                            span 
                                                i(class="fas fa-pen")
                                        .col-md-12
                                            input(required, disabled,  class="form-control", type="text", name="class", id="class", value=user.class)
                                    .form-group.row
                                        label.col-md-12.col-form-label(for='faculty') Faculty
                                            span 
                                                i(class="fas fa-pen")
                                        .col-md-12
                                            input(required, disabled,  class="form-control", type="text", name="faculty", id="faculty", value=user.faculty)

                                .form-group.row
                                    .col-md-12.justify-content-center.d-flex
                                            p(class="mb-0 text-success", id="updateInfoSuccess")
                                            p(class="mb-0 text-danger", id="updateInfoError")
                                    .col-md-12.justify-content-end.d-flex
                                        button.btn.btn-primary(type='submit') Update 
                                        button.btn.btn-default.ml-3(type='button', data-dismiss='modal') Close

        script(src="https://cdn.socket.io/3.1.1/socket.io.min.js") 
        script(src="https://apis.google.com/js/platform.js", async, defer)
        script(src="https://kit.fontawesome.com/a65ad4e019.js", crossorigin="anonymous")
        script(src="https://code.jquery.com/jquery-3.2.1.slim.min.js", integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN", crossorigin="anonymous")
        script(src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js", integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q", crossorigin="anonymous")
        script(src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js", integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl", crossorigin="anonymous")
        script(src="/javascripts/main.js") 